
[演示地址](http://www.wjinyu.top:8888)      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Github](https://github.com/sadjjk/StockProject)

股票行情看板，前前后后花了一个月，基本是周末闲(咸)余(鱼)时间写写改改，工作日实在没时间。

![Xnip2019-09-13_15-23-45.jpg](https://i.loli.net/2019/09/13/JxBvCRhUuOD84Ts.jpg)

![Xnip2019-09-13_15-24-39.jpg](https://i.loli.net/2019/09/13/v7pPDuyLQA6of2G.jpg)

![Xnip2019-09-13_15-31-42.jpg](https://i.loli.net/2019/09/13/urC7GbWq9NpKeDh.jpg)

## 设计

### 首页

#### 头部

三大股指，增加了涨、平、跌各多少只。

#### TopBanner

选择当前价、成交量金额、振幅、换手率。之所以选择这四个，是因为这四个相比于涨幅Top、跌幅Top更能反应市场整体情绪。

> 当前价Top:最高的当属**贵州茅台**  毫无疑问是市场的风向标 一锤定音 
> 成交量金额Top:成交最多的哪几只，基本是有业绩有实力的好公司  *纯属个人经验*
> 振幅Top、换手率Top:基本是当下市场最热门最冲动的股票 游资炒作居多

#### 自选股

自选股最重要的是可添加可删除，功能已实现，手机端无法删除，mouseout事件会失效。

#### 沪深300

沪深300几乎涵盖了各个行业 具有代表性

### 详情页



#### 分时图



#### K线图



## 交互

#### 刷新

首页交易时间1分钟刷新一次，非交易时间不刷新。交易时间哪里来，你怎么知道某年某天是节假日？tushare-三方库，我依然不生产数据，只是数据的搬运工。最初设计2秒刷新一次，毕竟1秒就是几百万的买卖，数据当然要及时。红的绿的一闪一闪真好看，最后闪瞎了狗眼，倔强得改成了1分钟刷新一次。其次爬虫用的好，牢房进的早。爬得太频繁，怕律师函警告，尤其是东方财富的数据。

#### 搜索

输入股票代码搜索股票详情 ，不支持股票名称、缩写，因为接口不支持，也没有精力是实现。搜索时页面刷新会暂停。搜索奇怪的东西有菜单，我真是天才！

#### 自选股添加/删除

输入股票代码添加 ，同样不支持股票名称、缩写。添加时页面刷新会暂停

## 后端

后端使用Python的微型Web框架Bottle，因为实在是非常的简单，没有必要使用Flask、Django，其实是我也不怎么会Flask、Django。后端鸡贼的地方就是没有数据库，**我从不生产数据，只是数据的搬运工**。使用腾讯、新浪、东财的股票接口，即用即爬。唯一要记录的就是自选股，用于查看、添加、删除。这里采用了保存为二级制隐藏文件，每次去读取、增删(不推荐 本人纯属偷懒省事)。第一次使用装饰器记录函数日志和异常

## 前端

前端是最耗时的  想法很多 但都实现不出来 磕磕绊绊 现在这版终于比较满意的。搜索页、自选股增删、头部Header、底部Footer、BacktoTop、搜索或添加自选时暂停刷新等 一点一点 慢慢磨出来   教练！ 我真的很想学前端

## 部署

uwsgi+nginx  
备案实在有些麻烦 IP凑合用下

## 总结

过程中 能抽象就抽象 减少重复代码 最大的感触就是 “**这样子好像不够优雅！**” 能力有限，尽管功能都基本实现了，但总觉得有更优雅更好实现方法。若干年后 我若再看到这份代码 一定会想重构。

👇下面是感谢环节

感谢Github 
感谢[geeeeeeeek](https://github.com/geeeeeeeek) 他的项目给我了idea
这是B站他项目的[视频](https://www.bilibili.com/video/av45168955) 一键三连 投币点赞
感谢[2557606319](https://github.com/2557606319) 项目中使用到了他echarts封装的K线图
感谢许多CSDN、Stack OverFlow、博客主等留下的教程与问题记录
尽管他们与我都不认识 但他们间接的帮助了我很多 非常感谢！

